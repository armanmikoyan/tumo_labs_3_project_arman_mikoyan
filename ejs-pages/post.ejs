<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://kit.fontawesome.com/3c944dc749.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="../style.css">
	<title><%= title%></title>
</head>
<body>
	<%- include('./partials/nav.ejs') %>
	<div class="posts">
		<div class="post">
			<h3>
				<a href=""><%= post.title %></a>
			</h3>
			<div class="btn">
			<button  data-id="<%=post.id %>">
				<i class="fa-solid fa-trash"  data-id="<%=post.id %>"></i>
			</button>
			<button>
			<a href="/edit/<%=post.id %>">
				<i class="fa-solid fa-pen-to-square"></i>
			</a>
		</button>
		</div>
			<p><%= post.text %></p>
			<div class="bottom">
				<span class="bottom-left"><%= post.author %></span>
				<span class="bottom-rigth"><%= post.updatedAt.toLocaleDateString() || 'No Date' %></span>
			</div>
		</div>	
	</div>	

	<script>
		document.addEventListener('click',(e)=>{
			const id = e.target.dataset.id 
			if(id){
				fetch(`/posts/${id}`,{
					method:'DELETE'
				}).then(()=>{
					window.location.href = '/posts'
				})
			}
		})
	</script>
</body>
</html>